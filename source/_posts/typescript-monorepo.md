---
title: íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ëª¨ë…¸ë ˆí¬
typora-copy-images-to: íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ëª¨ë…¸ë ˆí¬
tags:
  - typescript
  - monorepo
  - react
  - next
  - create-react-app
  - cra
date: 2018-08-15 18:45:58
---


## TypeScript, Monorepo

íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì™€ ëª¨ë…¸ë ˆí¬ ì…‹ì—…ì€ ë§¤ìš° ì§€ë‚œí•œ ì‹¸ì›€ì´ë‹¤. ë§ì§€ ì•ŠëŠ” ë¶€ë¶„ë„ ìƒë‹¹íˆ ë§ë‹¤. ë‚´ê°€ ì¼ì „ì— ë¬´ì—‡ì„ ë‚¨ê²¼ëŠ”ì§€ ê¸°ì–µì€ ë‚˜ì§€ ì•Šìœ¼ë‚˜ ë¹„ìŠ·í•œ ê¸€ì„ ë‚¨ê²¼ì—ˆë‹¤.

[ğŸŒ¸ ëª¨ë…¸ë ˆí¬. Lerna? Yarn Worksapce!](https://medium.com/@deptno/monorepo-yarn-workspace-e81e3e078100)

ìœ„ ê¸€ì— ëª¨ë…¸ë ˆí¬ê°€ ì™œ í•„ìš”ì§€ì— ëŒ€í•´ì„œëŠ” ë‚¨ê²¨ ë†¨ì„ ê²ƒì´ë¼ ìƒê°í•œë‹¤. ì–´ë–»ê²Œ ì…‹ì—…ì„ í•˜ëŠ”ì§€ ê¸€ì„ ë‚¨ê²¼ì—ˆì§€ë§Œ ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³  íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë§ˆì£¼í•˜ë©´ ì‰½ì§€ì•Šì€ ìƒí™©ì´ ë°œìƒí•œë‹¤. íŠ¹íˆ **í”„ë¡ íŠ¸ì—”ë“œ**ì—ì„œ ê·¸ëŸ¬í•˜ë‹¤.

í”„ë¡œì íŠ¸ë¥¼ ê°€ë³ê²Œ ìƒì„±í•œë‹¤ê³  í•´ë³´ì. ë‚´ê°€ ìì£¼ ì“°ëŠ” Next.js ì˜ [ë¹µíŒ](https://github.com/deptno/next.js-typescript-starter-kit) ì´ë‚˜ ì•„ë‹ˆë©´ ê·¸ëƒ¥ `create-react-app` ì— `react-scripts-ts` ë¥¼ ë¨¹ì—¬ì„œ TypeScript ë¡œ í”„ë¡œì íŠ¸ë¥¼ ì…‹ì—…í•˜ë©´ ì‘ì—…í•˜ëŠ” ë‚´ë‚´ `.js` , `.map` ë“±ì€ ë”ì´ìƒ ë°–ìœ¼ë¡œ ë…¸ì¶œë˜ì§€ ì•Šê³  ë©”ëª¨ë¦¬ì•ˆì—ì„œ ì²˜ë¦¬ëœë‹¤. ë•Œë¬¸ì— ìš°ë¦¬ëŠ” `.gitignore` ë¥¼ ë”°ë¡œ ì²˜ë¦¬í•˜ë©´ì„œ íŒŒì¼ IOì— ëŒ€í•œ ì„±ëŠ¥ ì´ìŠˆë“±ìœ¼ë¡œ ë¶€í„° ììœ ë¡­ë‹¤. ë°”ëŒì§í•˜ë‹¤.

## ê·¸ëŸ¼ ë¬´ì—‡ì´ ë¬¸ì œì¸ê°€?

ëª¨ë…¸ë ˆí¬ì˜ êµ¬ì„±ì€ ì•„ë˜ ì‚¬ì§„ê³¼ ìœ ì‚¬í•˜ë‹¤.

![img](typescript-monorepo/1*thsoeHGmHzCeaPWOCBlQUg.png)

ì´ ì´ë¯¸ì§€ëŠ” ì´ì „ì— ì“´ ê¸€ì—ì„œ ê°€ì ¸ì˜¨ ê²ƒì¸ë° í”„ë¡ íŠ¸ì—”ë“œê°€ ì—†ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ êµ¬í˜„ êµ¬ì¡°ë‹¤. êµ¬ì¡°ë¥¼ ë³´ë©´ `feed`, `html`, `readme`, `speech` ì˜ íŒ¨í‚¤ì§€ê°€ ì¡´ì¬í•œë‹¤. í¸ì˜ìƒ `readme` ë¥¼ `create-react-app` ë“±ìœ¼ë¡œ ìƒì„±í•œ ë©”ì¸ **í´ë¼ì´ì–¸íŠ¸ ì•±** ì´ë¼ê³  ìƒê°í•˜ì. ê·¸ëŸ¼ ì—¬ê¸°ì„œ `packages/readme/index.js` ëŠ” ì§€ì›Œì§„ë‹¤. í”„ë¡œì íŠ¸ ì…‹ì—…ì— ë”°ë¼ `.js`ëŠ” ê´€ë¦¬í•˜ì§€ë„ ë³´ì—¬ì§€ì§€ë„ ì•ŠëŠ”ë‹¤.

ë‚˜ë¨¸ì§€ íŒ¨í‚¤ì§€ë“¤ì€ ì»´íŒŒì¼ì˜ ê²°ê³¼ë¡œì¨ `.js` ì„ ìœ ì§€í•´ì•¼í•œë‹¤. ê° íŒ¨í‚¤ì§€ë¥¼ **ë¦¬ì—‘íŠ¸ ì»´í¬ë„ŒíŠ¸** ë¼ê³  ìƒê°í•˜ê³  ë©”ì¸ì¸ `readme` ì—ì„œ ì°¸ì¡°ë¥¼ í•˜ê²Œ ë˜ë©´ ëª¨ë…¸ë ˆí¬ì˜ êµ¬ì„± ì´ìœ ì™€ ê°™ì´ ì™¸ë¶€ ëª¨ë“ˆë¡œ ì²˜ë¦¬í•˜ë¯€ë¡œ `import` êµ¬ë¬¸ì„ í†µí•´ ë¡œë“œì‹œì— `.js` ê°€ ë¡œë“œë˜ë¯€ë¡œ ë°˜ë“œì‹œ `.js` ê°€ í•„ìš”í•˜ë‹¤.

ê·¸ëŸ¼ ë©”ì¸ í”„ë¡œì íŠ¸ì¸ `readme` ëŠ” ì»´íŒŒì¼ì„ ë”°ë¡œ ëŒë ¤ì„œ `.js` ë¥¼ ìƒì„±í•˜ë©´ ì•ˆë˜ê³  ë‚˜ë¨¸ì§€ íŒ¨í‚¤ì§€ë“¤ì— ëŒ€í•´ì„œëŠ” ì»´íŒŒì¼ì„ í†µí•´ `.js` ë¥¼ ìƒì„±í•´ì•¼í•œë‹¤. ì´ ë¶€ë¶„ì´ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì™€ ëª¨ë…¸ë ˆí¬ì˜ ì¡°í•©ì„ ë§¤ìš° ì–´ë µê²Œ ë§Œë“ ë‹¤. ë¶€ë¶„ë§ˆë‹¤ ë”°ë¡œ ì»´íŒŒì¼ì„ ëŒë¦¬ê³  IDE ì…‹ì—…ì— ë§¤ì´ëŠ”ë“± ë§ì€ ì‚½ì§ˆì„ í•˜ë‹¤ê°€ ì•„ë§ˆ ê·¸ë§Œë’€ë˜ ê²½í—˜ì„ ê°€ì§„ ê°œë°œìë“¤ë„ ì—¬ëŸ¿(ë‚˜ë§Œ? :eyes:)ìˆì„ì§€ ëª¨ë¥´ê² ë‹¤.

## TypeScript 3

ì„¹ì…˜ì´ í•˜ë‚˜ ë” ë“¤ì–´ê°€ì•¼í•˜ëŠ”ë° **ì‹œí–‰ì°©ì˜¤**ì— ëŒ€í•´ì„œ ì ì„ê¹Œ í•˜ë‹¤ê°€ ê·¸ì— ëŒ€í•œ ì˜ ì”Œì—¬ì§„ ê¸€ë¡œ ëŒ€ì²´í•œë‹¤. TypeScript ê³µì‹ ì‚¬ì´íŠ¸ì˜ í”„ë¡œì íŠ¸ ë ˆí¼ëŸ°ìŠ¤ í•¸ë“œë¶ê³¼ í›„ì´ì„œìš¸ì—ì„œ ì‘ì„±í•œ ê¸€ì´ë‹¤.

- [https://engineering.huiseoul.com/íƒ€ì…ìŠ¤í¬ë¦½íŠ¸-3-0-99e5d45ec439](https://engineering.huiseoul.com/íƒ€ì…ìŠ¤í¬ë¦½íŠ¸-3-0-99e5d45ec439)
- https://www.typescriptlang.org/docs/handbook/project-references.html

ëª¨ë…¸ë ˆí¬ì— ê´€ë ¨ëœ ê¸€ì€ ì•„ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ í”„ë¡œì íŠ¸ ë¹Œë“œì™€ ê´€ë ¨í•´ì„œ ì¸ìƒì ì¸ ë°œì „ì´ ìˆì—ˆë‹¤. `--build` ëª…ë ¹ì–´ì™€ í”„ë¡œì íŠ¸ ì°¸ì¡°ë¥¼ í†µí•´ ìˆœì°¨ì ìœ¼ë¡œ íš¨ìœ¨ì ì¸ ë¹Œë“œë¥¼ ì ìš©í•œë‹¤ ë­ ì´ëŸ° ë‚´ìš©ì¸ë° ìì„¸í•œ ë‚´ìš©ì€ ë¬¸ì„œì— ìˆë‹¤.

## Monorepo

ê·¸ëŸ¼ ë‹¤ì‹œ ëª¨ë…¸ë ˆí¬ë¡œ ëŒì•„ì˜¤ì.  `next` ë‚˜ `create-react-app` ì˜ ê°œë°œí™˜ê²½ì´ ëŒë©´ì„œ ì¶”ê°€ì ìœ¼ë¡œ ë‚˜ë¨¸ì§€ íŒ¨í‚¤ì§€ë“¤ì—ì„œ ë¹Œë“œê°€ ê°™ì´ ëŒì•„ì¤˜ì•¼í•œë‹¤. ë‚˜ë¨¸ì§€ íŒ¨í‚¤ì§€ë“¤ì€ ì»´íŒŒì¼ì„ í†µí•´ì„œ `.js` ë¥¼ ìƒì‚°í•´ ë‚¼ ê²ƒì´ê³  ë©”ì¸ ì•±ì—ì„œëŠ” ì´ë“¤ì´ `.js` ë¥¼ ê°€ì§€ê³  ìˆìœ¼ë¯€ë¡œ ê°œë°œí™˜ê²½ì—ì„œ ë°”ë¡œë°”ë¡œ `import` ë¥¼ í•  ìˆ˜ ìˆê²Œ ëœë‹¤.

ë“œë””ì–´ ì¶”ê°€ëœ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸@3 ì˜ í”„ë¡œì íŠ¸ ë ˆí¼ëŸ°ìŠ¤ì™€ `--build` ë¥¼ í†µí•´ ë”ëŸ¬ìš´ **í”„ë¡ íŠ¸ì—”ë“œ + íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ + ëª¨ë…¸ë ˆí¬** ê°€ëŠ¥í•´ì§„ë‹¤. 

ì´ì— ëŒ€í•œ ì„¤ëª…ì€ ê¸€ë³´ë‹¤ ì½”ë“œë¡œ ëŒ€ì‹ í•œë‹¤.

- [Next.js ë²„ì „](https://github.com/deptno/typescript-monorepo-next-example)
- [create-react-app ë²„ì „](https://github.com/deptno/typescript-monorepo-cra-example)

------

ë“±ì•„íŒŒì„œ ê¸€ì„ ê¸¸ê²Œ ëª»ì“°ê² ë‹¤...

> ğŸ’ 2018-09-05 ì¶”ê°€ ë‚´ìš©

### :shit: Package ê°„ì˜ ìƒí˜¸ ì°¸ì¡° ì˜ì¡´ì„±

íŒ¨í‚¤ì§€ê°„ì— ìƒí˜¸ ì°¸ì¡°ê°€ í•„ìš”í•œ ê²½ìš° ê¸°ì¡´ì˜ ëª¨ë…¸ë ˆí¬ì—ì„œ í•˜ë“¯ì´ `package.json` ì— `[packageName]: "*"`ì´ ë™ì‘í•˜ì§€ ì•Šì•˜ë‹¤. ëŒ€ì¶© ì•„ë˜ì™€ ê°™ì€ ì—ëŸ¬ê°€ ë‚œë‹¤.

```bash
npx tsc -b packages
error TS6307: File 'ê²½ë¡œ/packages/íŒ¨í‚¤ì§€ëª…/index.ts' is not in project file list. Projects must list all files or use an 'include' pattern.
```

`include` ë¼ëŠ” ë§ì— íœ˜ë‘˜ë ¤ì„œ ì‹œê°„ì„ ì«Œ ëºê²¼ëŠ”ë° ì˜ì¡´ì„±ì´ ì—†ëŠ” `pakcages/b` ëŠ” ì»´íŒŒì¼ì´ ë˜ëŠ” ê²ƒì„ ë³´ê³  ì´ê²ƒ ì €ê²ƒ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë´¤ë‹¤.

`packages/a` ê°€ `packages/b` ì— ëŒ€í•œ ì˜ì¡´ì„±ì„ ì§€ë‹ˆê³  ìˆì„ ë•Œ `packages/a` ì˜ `tsconfig.json` ì— ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì¶”ê°€í•´ì¤˜ì•¼ì§€ë§Œ ì»´íŒŒì¼ì´ ê°€ëŠ¥í•˜ë‹¤.

`packages/a/tsconfig.json` ì— `reference` êµ¬ë¬¸ì„ ì¶”ê°€í•´ì£¼ì

```json
"references": [
  { "path": "../b" }
]
```

ê·¸ë¦¬ê³  ë‹¤ì‹œ ë¹Œë“œí•œë‹¤.

```bash
tsx tsc -b packages
```